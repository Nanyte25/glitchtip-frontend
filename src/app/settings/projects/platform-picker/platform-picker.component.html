<div class="heading">
  <div class="text-info">
    <label for="project-picker" class="mat-body-1">Platform</label>
    <p class="mat-caption">
      The primary platform for this project. Used for docs and aesthetics.
    </p>
  </div>
  <mat-form-field>
    <input
      #filterInput
      type="text"
      placeholder="Filter platforms"
      aria-label="Filter platforms"
      [formControl]="filterPlatformInput"
      matInput
    />
  </mat-form-field>
</div>
<mat-tab-group
  id="project-picker"
  [selectedIndex]="selected"
  (selectedIndexChange)="setSelected($event)"
>
  <mat-tab label="{{ category.name }}" *ngFor="let category of categoryList">
    <ul>
      <li *ngFor="let platform of category.platforms">
        <button
          mat-stroked-button
          type="button"
          (click)="writeValue(getPlatformId(platform))"
          [class.active]="activePlatform === getPlatformId(platform)"
          [color]="activePlatform === getPlatformId(platform) ? 'primary' : ''"
        >
          {{ getPlatformName(platform) }}
        </button>
      </li>
    </ul>
  </mat-tab>
  <mat-tab label="All">
    <ul>
      <li *ngIf="(filteredPlatforms$ | async)?.length === 0">
        <button
          mat-stroked-button
          type="button"
          (click)="writeValue('other')"
          [class.active]="activePlatform === getPlatformId('other')"
        >
          Other
        </button>
      </li>
      <li *ngFor="let platform of filteredPlatforms$ | async">
        <button
          mat-stroked-button
          type="button"
          (click)="writeValue(platform.id)"
          [class.active]="activePlatform === getPlatformId(platform.id)"
        >
          {{ platform.name }}
        </button>
      </li>
    </ul>
  </mat-tab>
</mat-tab-group>
