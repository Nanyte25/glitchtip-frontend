<section *ngIf="paginator$ | async as paginator" class="l-body">
  <header class="page-header">
    <h1 class="mat-display-1">Projects</h1>
    <a
      *ngIf="activeOrganizationSlug$ | async as slug"
      mat-flat-button
      [routerLink]="['/settings', slug, 'projects', 'new']"
      color="primary"
    >
      Create New Project
    </a>
  </header>

  <div *ngIf="projectsForActiveOrg$ | async as projects">
    <h1>length: {{ projects.length }}</h1>
    <app-empty-projects *ngIf="projects.length === 0"></app-empty-projects>
  </div>

  <div class="card-wrapper">
    <app-project-card
      *ngFor="let project of projectsForActiveOrg$ | async"
      [cardLink]="project.slug"
      [title]="project.name"
      [descriptionList]="[
        { key: 'organization', value: project.organization.name },
        { key: 'date created', value: (project.dateCreated | date)! }
      ]"
      [isMember]="project.isMember"
      [secondaryButton]="{
        link: project.slug,
        icon: 'settings',
        text: 'Settings'
      }"
    ></app-project-card>
  </div>
  <div class="pagination">
    <button
      [routerLink]="[]"
      [queryParams]="paginator.previousPageParams || {}"
      queryParamsHandling="merge"
      mat-button
      [disabled]="paginator.hasPreviousPage === false"
    >
      <mat-icon>keyboard_arrow_left</mat-icon>
    </button>
    <p>{{ paginator.nextPageParams | json }}</p>
    <button
      [routerLink]="[]"
      [queryParams]="paginator.nextPageParams || {}"
      queryParamsHandling="merge"
      mat-button
      [disabled]="paginator.hasNextPage === false"
    >
      <mat-icon>keyboard_arrow_right</mat-icon>
    </button>
  </div>
</section>
